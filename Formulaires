from Tkinter import *
from tkMessageBox import *
from datetime import *


def formulaireJeu():
    """Retourne un tuple tirer d'un formulaire.
    (nomJeu, anneeJeu, ageJeu, nbJoueurJeu, quantiteJeu, auteurJeu, illustrateurJeu,
    editeurJeu, estEmpruntableJeu, synopsisJeu)"""
    FJ = Tk()

    def CallBackFJ(): #Fonction de confirmation DANS la fonction de fenetre.
        if askyesno("Confirmation", "Enregister le jeu ?"):
            return FJ.quit() #Ferme si "oui"
        else : return

    T1 = LabelFrame(FJ, text="Formulaire de jeu :")
    NJ = Label(FJ, text="Nom du jeu :")
    AnJ = Label(FJ, text="Année de sortie du jeu :")
    AgJ = Label(FJ, text="Ages du public du jeu :")
    NbJ = Label(FJ, text="Nombre de joueur pour ce jeu($$-$$) :")
    QJ = Label(FJ, text="Nombre d'exemplaire total du jeu :")
    AJ = Label(FJ, text="Auteur du jeu :")
    IJ = Label(FJ, text="Illustrateur du jeu :")
    EJ = Label(FJ, text="Editeur du jeu :")
    Emp = Label(FJ, text="Ce jeu peut-etre Emprunté :")
    SJ =Label(FJ, text="Description du jeu (200caractères) :")
    AddJ = Label(FJ, text="Ajouter le jeu :")
    #Titre
    T1.pack()
    #Nom du jeu (champs à remplir)
    NJ.pack()
    nomJeu = StringVar()
    nomJeu.set("Nom du jeu")
    NJI = Entry(FJ,textvariable=nomJeu,width=40)
    NJI.pack()
    #Annee Jeu (graduation)
    AnJ.pack()
    AnJI = Spinbox(FJ, from_=1960, to = date.today().year)
    AnJI.pack()
    #Age joueurs(Champs à remplir)
    AgJ.pack()
    AgJI = Spinbox(FJ, from_=0, to = 20)
    AgJI.pack()
    #Nombre de joueurs (graduation)
    NbJ.pack()
    nbJoueurJeu="00-00"
    NbJI = Entry(FJ, textvariable=nbJoueurJeu, width=45)
    NbJI.pack()
    #Quantite d'exemplaire du jeu (gradutation)
    QJ.pack()
    QJI = Spinbox(FJ, from_=0, to=999)
    QJI.pack()
    #Auteur du jeu (champs à remplir)
    AJ.pack()
    auteurJeu="Auteur du jeu"
    AJI = Entry(FJ, textvariable=auteurJeu, width = 45)
    AJI.pack()
    #Illustrateur du jeu (champs à remplir)
    IJ.pack()
    illustrateurJeu="Illustrateur du jeu"
    IJI = Entry(FJ, textvariable=illustrateurJeu, width = 45)
    IJI.pack()
    #Editeur du jeu (champs à remplir)
    EJ.pack()
    editeurJeu="Editeur du jeu"
    EJI = Entry(FJ, textvariable=editeurJeu, width = 45)
    EJI.pack()
    #Empruntable ou non ? (case à cocher)
    Emp.pack()
    Empbool = IntVar()
    EmpI = Checkbutton(FJ, text="Est-il empruntable?", variable = Empbool)
    EmpI.pack()
    #Synospis du jeu (Champs à remplir)
    SJ.pack()
    synopsisJeu = "Description sommaire du jeu."
    SJI = Entry(FJ, textvariable=synopsisJeu, width = 45)
    SJI.pack()
    #Fin : Confirmation de l'ajout du jeu
    AddJ.pack()
    AddJI = Button(FJ, text="Confirmer", command = CallBackFJ)
    AddJI.pack()
    #Lancement de la fenetre
    FJ.mainloop()
    #On recupere les données de chaque entrée.
    DonneesJeu = (NJI.get(), AnJI.get(), AgJI.get(),NbJI.get(),
                  QJI.get(),AJI.get(),IJI.get(),EJI.get(), bool(Empbool.get()), SJI.get())
    #Enfin on detruit la fenetre
    FJ.destroy()
    return DonneesJeu
